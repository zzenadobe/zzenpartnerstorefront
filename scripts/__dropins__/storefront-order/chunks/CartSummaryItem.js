/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as l,jsxs as y,Fragment as E}from"@dropins/tools/preact-jsx-runtime.js";import{Price as z,Image as A,CartItem as B,Icon as F,Incrementer as K}from"@dropins/tools/components.js";import{useCallback as V}from"@dropins/tools/preact-hooks.js";import{classes as H}from"@dropins/tools/lib.js";import{O as Q}from"./OrderLoaders.js";import*as O from"@dropins/tools/preact-compat.js";const R=o=>O.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...o},O.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M0.75 12C0.75 5.78421 5.78421 0.75 12 0.75C18.2158 0.75 23.25 5.78421 23.25 12C23.25 18.2158 18.2158 23.25 12 23.25C5.78421 23.25 0.75 18.2158 0.75 12Z",stroke:"currentColor"}),O.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M11.75 5.88423V4.75H12.25V5.88423L12.0485 13.0713H11.9515L11.75 5.88423ZM11.7994 18.25V16.9868H12.2253V18.25H11.7994Z",stroke:"currentColor"})),C=({placeholderImage:o="",loading:M,product:e,itemType:Z,taxConfig:j,translations:g,disabledIncrementer:q,onQuantity:b,showConfigurableOptions:k,routeProductDetails:v})=>{var S,_,D,f,L;const{taxExcluded:w,taxIncluded:I}=j,a=V((i,t,s)=>l(z,{amount:i,currency:t,weight:"normal",...s}),[]),T=V(i=>{var s,x;const t=(s=i==null?void 0:i.product)!=null&&s.thumbnail.url.length?(x=i==null?void 0:i.product)==null?void 0:x.thumbnail.url:o;return l(A,{src:t,alt:i==null?void 0:i.productName,loading:"lazy",width:"90",height:"120"})},[o]);if(!e)return l(Q,{});let P={};const N=Z==="cancelled",W=(_=(S=e==null?void 0:e.product)==null?void 0:S.stockStatus)==null?void 0:_.includes("IN_STOCK"),n=e==null?void 0:e.giftCard,$=e.totalQuantity>1?{quantity:e.totalQuantity}:{},u=e.discounted,{includeAndExcludeTax:c,includeTax:h,excludeTax:r}=e.taxCalculations,m=e==null?void 0:e.totalQuantity,d={...(e==null?void 0:e.configurableOptions)||{},...(e==null?void 0:e.bundleOptions)||{},...n!=null&&n.senderName?{[g.sender]:n==null?void 0:n.senderName}:{},...n!=null&&n.senderEmail?{[g.sender]:n==null?void 0:n.senderEmail}:{},...n!=null&&n.senderName?{[g.sender]:n==null?void 0:n.senderName}:{},...n!=null&&n.recipientEmail?{[g.recipient]:n==null?void 0:n.recipientEmail}:{},...n!=null&&n.message?{[g.message]:n==null?void 0:n.message}:{},...e!=null&&e.downloadableLinks?{[`${(D=e==null?void 0:e.downloadableLinks)==null?void 0:D.count} ${g.downloadableCount}`]:(f=e==null?void 0:e.downloadableLinks)==null?void 0:f.result}:{}};if(I&&w){const i=a(c.originalPrice.value,c.originalPrice.currency),t=a(c.baseOriginalPrice.value*m,c.baseOriginalPrice.currency,{variant:e.discounted?"strikethrough":"default",weight:"bold"}),s=a(c.baseDiscountedPrice.value*m,c.baseDiscountedPrice.currency,{sale:!0,weight:"bold"}),x=a(c.baseExcludingTax.value*m,c.baseExcludingTax.currency,{weight:"bold"});P={taxExcluded:!0,taxIncluded:void 0,price:i,total:y(E,{children:[t,e.discounted?s:null]}),totalExcludingTax:x}}else if(!I&&w){const i=a(r.originalPrice.value,r.originalPrice.currency),t=a(r.baseOriginalPrice.value*m,r.baseOriginalPrice.currency,{variant:u?"strikethrough":"default",weight:"bold"}),s=a(r.baseDiscountedPrice.value*m,r.baseDiscountedPrice.currency,{sale:!0,weight:"bold"}),x=a(r.baseExcludingTax.value*m,r.baseExcludingTax.currency,{weight:"bold"});P={taxExcluded:void 0,taxIncluded:void 0,price:i,total:y(E,{children:[t,u?s:null]}),totalExcludingTax:x}}else if(I&&!w){const i=a(h.singleItemPrice.value,h.singleItemPrice.currency),t=a(h.baseOriginalPrice.value*m,h.baseOriginalPrice.currency,{variant:u?"strikethrough":"default",weight:"bold"}),s=a(h.baseDiscountedPrice.value*m,h.baseDiscountedPrice.currency,{sale:!0,weight:"bold"});P={taxExcluded:void 0,taxIncluded:!0,price:i,total:y(E,{children:[t,u?s:null]})}}return l(B,{loading:M,alert:N&&W?y("span",{children:[l(F,{source:R}),g.outOfStock]}):l(E,{}),configurations:(k==null?void 0:k(d))??d,title:v?l("a",{"data-testid":"product-name",className:H(["cart-summary-item__title",["cart-summary-item__title--strikethrough",N]]),href:v(e),children:e==null?void 0:e.productName}):l("div",{"data-testid":"product-name",className:H(["cart-summary-item__title",["cart-summary-item__title--strikethrough",N]]),children:e==null?void 0:e.productName}),sku:l("div",{children:(L=e==null?void 0:e.product)==null?void 0:L.sku}),...$,image:v?l("a",{href:v(e),children:T(e)}):T(e),...P,footer:b&&!q?l(K,{value:1,min:1,max:e==null?void 0:e.totalQuantity,onValue:i=>b==null?void 0:b(Number(i)),name:"quantity","data-testid":"returnIncrementer",readonly:!0}):void 0})};export{C,R as S};
