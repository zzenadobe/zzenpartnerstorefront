/*! Copyright 2025 Adobe
All Rights Reserved. */
var o=Object.defineProperty;var f=(n,e,t)=>e in n?o(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var r=(n,e,t)=>f(n,typeof e!="symbol"?e+"":e,t);const c=Date.now().toString(36).substring(2);class a{static lastPayload(e){var t;return(t=this._lastEvent[e])==null?void 0:t.payload}static on(e,t,i){if(typeof BroadcastChannel>"u")return;const l=new BroadcastChannel("ElsieSDK/EventBus");if(i!=null&&i.eager){const s=this._lastEvent[e];s&&t(s.payload)}return l.addEventListener("message",({data:s})=>{this._identifier&&this._identifier!==s.identifier||s.event===e&&t(s.payload)}),{off(){l.close()}}}static emit(e,t){if(typeof BroadcastChannel>"u")return;const i=new BroadcastChannel("ElsieSDK/EventBus");i.postMessage({event:e,identifier:this._identifier,payload:t}),this._lastEvent[e]={payload:t},i.close()}static enableLogger(e){var t;typeof BroadcastChannel>"u"||((t=this._logger)==null||t.close(),this._logger=null,e!==!1&&(this._logger=new BroadcastChannel("ElsieSDK/EventBus"),this._logger.addEventListener("message",({data:i})=>{this._identifier&&this._identifier!==i.identifier||(console.group(`ðŸ“¡ Event (${i.identifier}) âž¡ ${i.event}`),console.log(i.payload),console.groupEnd())})))}}r(a,"_identifier",c),r(a,"_logger",null),r(a,"_lastEvent",{});export{a as events};
