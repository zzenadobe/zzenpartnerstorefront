/*! Copyright 2025 Adobe
All Rights Reserved. */
var H=Object.defineProperty;var g=(h,t,e)=>t in h?H(h,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[t]=e;var s=(h,t,e)=>g(h,typeof t!="symbol"?t+"":t,e);const F={"Content-Type":"application/json",Accept:"application/json"};class i{constructor(){s(this,"_endpoint");s(this,"_fetchGraphQlHeaders")}get endpoint(){return this._endpoint}get fetchGraphQlHeaders(){return this._fetchGraphQlHeaders}setEndpoint(t){this._endpoint=t}setFetchGraphQlHeader(t,e){this._fetchGraphQlHeaders={...this.fetchGraphQlHeaders,[t]:e}}removeFetchGraphQlHeader(t){var e;(e=this._fetchGraphQlHeaders)==null||delete e[t]}setFetchGraphQlHeaders(t){this._fetchGraphQlHeaders={...t}}async fetchGraphQl(t,e){const c=this.endpoint,l=this.fetchGraphQlHeaders;if(!c)throw Error('Missing "url"');const r=(e==null?void 0:e.method)??"POST",p=e==null?void 0:e.cache,G=e==null?void 0:e.signal;let n;const a=new URL(c),Q={...F,...l};return r==="POST"&&(n=JSON.stringify({query:t,variables:e==null?void 0:e.variables})),r==="GET"&&(a.searchParams.append("query",b(t)),e!=null&&e.variables&&a.searchParams.append("variables",JSON.stringify(e.variables))),await fetch(a,{method:r,headers:Q,body:n,cache:p,signal:G}).then(f=>f.json())}getConfig(){return{endpoint:this.endpoint,fetchGraphQlHeaders:this.fetchGraphQlHeaders}}getMethods(){return{setEndpoint:this.setEndpoint.bind(this),setFetchGraphQlHeader:this.setFetchGraphQlHeader.bind(this),removeFetchGraphQlHeader:this.removeFetchGraphQlHeader.bind(this),setFetchGraphQlHeaders:this.setFetchGraphQlHeaders.bind(this),fetchGraphQl:this.fetchGraphQl.bind(this),getConfig:this.getConfig.bind(this)}}}const d=new i;class _ extends i{get endpoint(){return this._endpoint??d.endpoint}get fetchGraphQlHeaders(){return(this._endpoint?this._fetchGraphQlHeaders:{...this._fetchGraphQlHeaders,...d.fetchGraphQlHeaders})||{}}}function b(h){return h=h.replace(/#.*/g,""),h=h.replace(/\s+/g," "),h.trim()}const{setEndpoint:u,setFetchGraphQlHeaders:v,setFetchGraphQlHeader:E,removeFetchGraphQlHeader:C,fetchGraphQl:w,getConfig:M}=d.getMethods();export{_ as FetchGraphQL,w as fetchGraphQl,M as getConfig,C as removeFetchGraphQlHeader,u as setEndpoint,E as setFetchGraphQlHeader,v as setFetchGraphQlHeaders};
